{% extends "webapp/base_registered.html" %}
{% load tags %}
{% block extra_js %}
    <script src="/static/webapp/js/jquery.tmpl.min.js"></script>
    <script src="/static/facebookApp/js/social.js"></script>
{%endblock%}

{% block title %}Followers{% endblock %}
{% block body %}
    <h1>
        {% ifequal user.username username_page %}
            Te siguen {{followers|length}} personas
        {% else %}
            A {{username_page}} le siguen {{followers|length}} personas
        {% endifequal %}
    </h1>
    
    <ul id="user-list">
    {% for f in followers %}
        <li>
            <div class="avatar">
                <a href="{% url2 in_facebook public_profile f.username %}" title="Ver perfil en GeoRemindMe">
                    <img src="{% embedded_avatar f.username%}" alt="Avatar">
                </a>
                <br>
                <a href="{% url2 in_facebook public_profile f.username%}" title="Ver perfil en GeoRemindMe">{{ f.username }}</a>
            </div>

            {% ifequal user.username username_page %}
                <!-- Depende de si ya lo sigues o-->
                {% if f.is_following %}
                    <div id="following_state_{{ f.id }}" class="follow-button following-state">
                        <span  onclick="javascript:follow('unfollow',{{f.id}})"><a href="#" class="following">Siguiendo</a></span>
                    </div>
                {% else %}
                    <div id="following_state_{{ f.id }}" class="follow-button">
                        <span  onclick="javascript:follow('follow',{{f.id}})"><a href="#" class="no-following">Seguir</a></span>
                    </div>
                {% endif %}
            {% endifequal %}
            
            <div class="user-data">
                <ul>
                    <li><a href="{% url2 in_facebook public_profile f.username%}" title="Sugerencias hechas"><span>{{ f.profile.parent.counters.suggested }}</span>Sugerencias</a></li>
                    <li><a href="{% url2 in_facebook followers_panel f.username%}" title="Personas que le siguen"><span>{{ f.profile.parent.counters.followers }}</span>Seguidores</a></li>
                    <li><a href="{% url2 in_facebook public_profile f.username%}" title="Recomendaciones suyas que te han gustado"><span>{{ f.profile.parent.counters.influenced }}</span>Impactos</a></li>
                    <li><a href="{% url2 in_facebook followings_panel f.username%}" title="Personas a las que sigue"><span>{{ f.profile.parent.counters.followings }}</span>Siguiendo</a></li>
                </ul>
            </div>
            <hr>
        </li>
    {% endfor %}    
    </ul>
{% endblock %}
