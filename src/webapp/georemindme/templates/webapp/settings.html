{% extends "webapp/base_registered.html" %}
{% load i18n %}
{% load tags %}

{% block title %}Configuración de la cuenta{% endblock %}

{% block extra_js %}
    {% if in_facebook %}
		<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>
	{% endif %}
	
	<script type="text/javascript">
		
		$(document).ready(function(){
			$('.help-icon img').click(function(){
				//showHelp('#add-suggestion-btn','#addSuggestion-toolbox','up');
				//showHelp('#','#help-language-text','up');
				showHelp('#privacy-pointer','#help-privacy-text','left');
				showHelp('#accounts-pointer','#help-accounts-control-text','left');
				showHelp('#notifications-pointer','#help-notifications-text','left');
			});
		});
		
	</script>
{%endblock%}

{% block goBack %}{%endblock%}
{% block body %}
    <div id="profile">
        
        <h1>Configuración de la cuenta</h1>
        <a href="{% url2 in_facebook edit_settings %}" class="btn" id="edit-settings-btn">Editar</a> 
        
        <div class="section" id="notifications-pointer">
            <div class="header">
                <h2>Notificaciones</h2>
                <div class="help-icon"><img src="/static/common/img/transparent.gif" alt="Help" id="help-notifications"></div>
            </div>
            
            
            
            
            <p>Te llegarán notificaciones por email cuando:</p>
            <dl id="mail-notifications">
                <dt>Otro usuario empieza a seguir tus sugerencias</dt>
                <dd>{{user.settings.time_notification_account}}</dd>
                
                <dt>Recibes un comentario en una sugerencia</dt>
                <dd>{{user.settings.time_notification_suggestion_comment}}</dd>
                
                <dt>Persona guarda una sugerencia tuya</dt>
                <dd>{{user.settings.time_notification_suggestion_follower}}</dd>
            </dl>
        </div>
        
        <div class="section" id="accounts-pointer">
            <div class="header">
                <h2>Control de cuentas</h2>
            </div>
            
            <p>
                No queremos ser <em>otra red social más</em>; sino una herramienta de enlace entre tus redes actuales para gestionar tus recomendaciones.<br>
                Por ello, para ofrecerte una mejor experiencia puedes autorizarnos para que puedas utilizar la potencia de tus redes desde GeoRemindMe!
            </p>
            <table>
                <tr id="head">
                    <td>Red</td>
                    <td>Estado</td>
                </tr>
                <tr>
                    <td><span id="facebook-icon">Facebook</span></td>
                    {% if not user.facebook_user%}
                        <td>
                            <a href="/login/facebook/?cls" target="_blank">Autorizar</a> 
                        </td>
                    {% else %}
                        <td>
                            <a href="/oauth/revocate/facebook" target="_blank">Revocar</a> (<a href="{{user.facebook_user.profile_url}}">{{user.facebook_user.realname}}</a>)
                        </td>
                    {% endif %}
                </tr>
                <tr>
                    <td><span id="twitter-icon">Twitter</span> </td>
                    <td>
                        {% if not user.twitter_user %}
                            <a href="/login/twitter/?cls" target="_blank">Autorizar</a> 
                        {% else %}
                            <a href="/oauth/revocate/twitter" target="_blank">Revocar permisos (@{{user.twitter_user.username}})</a>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <td><span id="google-icon">Google</span> </td>
                    <td>
                        {% if not user.google_user %}
                            <a href="/login/google/?cls">Autorizar</a>
                        {% else %}
                            <a href="/oauth/revocate/google" target="_blank">Revocar</a>
                        {% endif %}
                    </td>
                </tr>
            </table>
        </div>
        
        <div class="section" id="privacy-pointer">
            <div class="header">
                <h2>Privacidad</h2>
            </div>
        
            
            <p>
                <strong>Visibilidad del perfil</strong>: 
                {% if settings.show_public_profile %} 
                    Público
                {% else %}
                    Privado
                {% endif %}
            </p>
            <p>Por defecto todas las sugerencias y listas de sugerencias serán mostradas públicamente, aunque siempre existe la posibilidad de cambiarles individualmente la visibilidad.</p>
        </div>
        
<!--
        <div class="section">	
            <div class="header">
                <h2>Idioma</h2>
                <div class="help-icon"><img src="/static/common/img/transparent.gif" alt="Help" id="help-language"></div>
            </div>
            
            {% get_available_languages as LANGUAGES %}
            {% get_current_language as LANGUAGE_CODE %}
            <p>
                <strong>Idioma de la interfaz:</strong>
                {% for code, name in LANGUAGES %}
                    {%if LANGUAGE_CODE == code %}{{name}}{% endif %} 

                {% endfor %}
                <a href="{% url2 in_facebook edit_settings %}" class="btn" id="edit-settings-btn">Editar</a> 
            </p>
        </div>
-->
        
    
        
        
        <hr>
        <div id="desinstall">
            <a href="http://www.facebook.com/settings?tab=applications">Desinstalar la aplicación</a> 
<!--
            <a href="">Cancelar mi cuenta en GeoRemindMe</a>
-->
        </div>
    </div>
    
    <div id="help-notifications-text" style="display:none">
        <p>Como otras muchas herramientas <strong>recibirás siempre que quieras un resumen por correo</strong> con las novedades de tu red.</p>
    </div>
    
    <div id="help-accounts-control-text" style="display:none">
        <p>Desde aquí podrás siempre que quieras <strong>conectar o desconectar tus cuentas</strong> de otras redes.</p>
    </div>
    
    <div id="help-privacy-text" style="display:none">
        <p>Estamos trabajando en la privacidad de los perfiles para darte la opción de <strong>restringir la visibilidad</strong> de tu cuenta solo a tus followings.</p>
    </div>
    
    <div id="help-language-text" style="display:none">
        <p>Texto de ayuda idioma</p>
        <p>Si tienes alguna pregunta puedes hacerla desde <a href="">la página de la comunidad</a>.</p>
    </div>
    
    <div id="addSuggestion-toolbox" style="display:none">
		<p>Empieza a crear contenido haciendo clic aquí.</p>
		<p>Puedes compartir las sugerencias que crees a través de las redes sociales que tengas conectadas.</p>
	</div>
    
{% endblock %}
