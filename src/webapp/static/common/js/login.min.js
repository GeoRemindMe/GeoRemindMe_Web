$(document).ready(function(){$("#loginForm").submit(function(a){a.preventDefault();GRM.wait();$.ajax({type:"POST",url:"/ajax/login/",dataType:"json",data:{"user_login-email":$(this).find('[name="email"]').val(),"user_login-password":$(this).find('[name="password"]').val(),csrfmiddlewaretoken:$(this).find('[name="csrfmiddlewaretoken"]').val()},error:function(){GRM.nowait()},success:function(b){if(b.error!=""){showMessage(b.error,"error");GRM.nowait()}else{window.location=b._redirect}}})});$("#textTermsCheckbox").click(function(){var a=$(this).parent().find("input");a.attr("checked",!a.is(":checked"))});$("#register-menu li").click(function(b){var a=$("#register-menu li.active");$(a).removeClass("active");if($(a).attr("id")!=$(this).attr("id")){$(this).addClass("active")}});$(".register-text-aux").toggle(function(){$("#registerForm").slideDown(400);$("#register-with-social").slideUp(400);$(this).addClass("close")},function(){$("#registerForm").slideUp(400);$("#register-with-social").slideDown(400);$(this).removeClass("close")});$("#register-btn").click(function(c){c.preventDefault();var b=$("#register-menu li.active");if(b.length==0){showMessage(gettext("Primero selecciona una de la redes"),"error")}else{var a="/login/"+b.attr("id")+"/";$(this).attr("href",a);if($(this).attr("onclick")===undefined||$(this).attr("onclick")==null){window.location=$(this).attr("href")}else{$(this).click()}}});$(".georemindme").click(function(){$("#login-bar p").hide();$("#login-bar ul").hide();$("#georemindme-form").show()});$("#userRegisterPass1,#userRegisterPass2").blur(function(){checkPasswords(false)});$("#userRegisterPass1,#userRegisterPass2").keyup(function(){$("#passwordStatus").hide()});$("#registerEmail").blur(function(){checkEmail()});$("#registerEmail").keyup(function(){$("#emailStatus").hide();$("#registerEmail").next("div").hide();$("#registerEmail").next("div").text("")});$("#registerFormForm").submit(function(h){if(typeof(REQUEST)!="undefined"&&REQUEST){REQUEST.abort()}h.preventDefault();var f=checkPasswords();var d=checkEmail(true);var i=checkTerms();if(!f||!d||!i){return}var g={"user_register-email":function(){return $("#registerEmail").val()},"user_register-password":function(){return $("#userRegisterPass1").val()},"user_register-password2":function(){return $("#userRegisterPass2").val()},csrfmiddlewaretoken:function(){return $('#registerFormForm input[type="hidden"]').val()}};GRM.wait();$("#msgRegisterEmail").hide();$("#msgRegisterPass").hide();REQUEST=$.ajax({url:"/ajax/register/",dataType:"json",data:g,success:function(a){if(typeof(a.errors)!="undefined"){if(typeof(a.errors.email)!="undefined"){$("#emailStatus").removeClass("ok").addClass("no-ok").show();$("#registerEmail").next("div").text(a.errors.email).show()}if(typeof(a.errors.password)!="undefined"){$("#passwordStatus").show().text(a.errors.password)}GRM.nowait()}else{if(typeof(a._redirect)!="undefined"){window.location=a._redirect}}REQUEST=null},error:function(a){GRM.nowait();REQUEST=null},type:"POST",async:true})})});